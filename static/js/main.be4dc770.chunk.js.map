{"version":3,"sources":["components/Legend/Legend.js","hooks/useResizeObserver.js","components/PieChart/PieChart.js","functions/filterDCData.js","functions/filterAndrewData.js","components/GeoChart/DropShadow.js","components/GeoChart/GeoChart.js","components/StackedBarGraph/AnimatedStackedBarGraph.js","components/StackedBarGraph/FilterButtons.js","components/StackedBarGraph/StackedBarGraph.js","components/LineGraph/LineGraph.js","components/Sidebar/Sidebar.js","App.js","functions/formatData.js","serviceWorker.js","index.js","data/Andrew/mass_shootings.csv","data/Andrew/culpritDemographics.csv","data/Andrew/militaryShooters.csv","data/DC/victimsPerState.csv","data/DC/targetsFrequency.csv","data/DC/closeOpenSpaces.csv","data/Tom/numMassShootings.csv"],"names":["Legend","keys","colors","className","map","key","i","capitalisedKey","charAt","toUpperCase","substring","style","backgroundColor","useResizeObserver","ref","useState","dimensions","setDimensions","useEffect","observerTarget","current","resizedObserver","ResizeObserver","entries","forEach","entry","contentRect","observe","unobserve","PieChart","chartAlign","pieChartData","innerRadius","outerRadius","pieChartRef","useRef","wrapperRef","pieChartKeys","Object","pieChartValues","values","svg","select","length","undefined","arcGenerator","arc","instructions","pie","pieGenerator","colorScale","scaleOrdinal","domain","range","alignPie","width","selectAll","data","join","attr","instruction","value","height","on","labelIndex","upperCaseLetter","restOfWord","enter","append","text","remove","bindVictimsData","updatedData","victims","state","properties","NAME","shootings","fatalities","injuries","policemenKilled","totalVictims","bindTargetsData","targets","countDemographicFrequency","shootingsForYear","currentYear","demographics","year","kidsAndTeenagers","youngAdults","adults","middleAged","shooting","age","Age","updateGeoJsonData","geoJson","features","bindDCDataToGeoJson","filterStackedBarGraph","property","startOfRange","endOfRange","filter","object","countMentalHealthFrequency","mentalHealthData","mentalIllnesses","actsOfTerrorism","psychologicalFactors","anger","frustration","unknown","Cause","console","log","DropShadow","stdDeviation","slope","id","in","dx","dy","result","type","GeoChart","victimsPerState","targetsPerState","isTargetsOptionSelected","selectedTargetIndex","geoChartRef","selectedCountry","setSelectedCountry","updatedFeaturesData","getBoundingClientRect","minProp","min","feature","maxProp","max","maxPropTargets","scaleLinear","projection","geoMercator","fitSize","precision","pathGenerator","geoPath","displayTooltip","tooltip","document","getElementById","addEventListener","e","x","clientX","y","clientY","left","top","textContent","formattedProperty","replace","toLowerCase","targetsText","number","target","setTooltipText","transition","duration","targetValue","setFillOfMap","AnimatedStackedBarGraph","stackedBarGraphData","startValue","setStartValue","endValue","setEndValue","stackedGraphRef","dataForGraph","layers","stack","stackGenerator","yAxisRange","layer","sequence","xScale","scaleBand","padding","yScale","xAxis","axisBottom","call","yAxis","axisLeft","bandwidth","onChange","FilterButtons","keysState","keysArray","setKeysArray","onCheckboxChange","checked","includes","htmlFor","StackedBarGraph","space","LineGraph","lineGraphData","yAxisMax","reverseData","xAxisFontSize","svgRef","reverse","ticks","tickFormat","index","axisRight","myLine","line","Sidebar","class","href","App","setVictimsPerState","setTargetsPerState","setProperty","setIsTargetsOptionSelected","setSelectedTargetIndex","setPieChartData","occupationsData","setOccupationsData","numShootingsData","setNumShootingsData","ageGroupData","setAgeGroupData","ageGroupKeys","ageGroups","setAgeGroups","ageGroupColors","mentalHealthFrequencies","setMentalHealthFrequencies","mentalHealthKeys","setMentalIllnesses","mentalHealthColors","Array","from","Set","currentKey","stackedDataToView","setStackedDataToView","spaceData","setSpaceData","csv","culpritDemographics","then","dataReceived","yearlyDemographics","shootingsOnThisYear","Date","split","push","filterCulpritDemographicData","allMassShootings","dataForPieChart","shootingTargets","filteredData","row","Target","unknownData","filterShootingTargetData","dataForStackedGraph","yearlyMentalHealth","currentYearData","filterMentalHealthData","shooterOccupations","difference","military","other","filterMilitaryCulprits","victimsOfShootings","States","Fatalities","Injured","filterVictimsData","targetsFrequency","stateTargets","defineProperty","writable","enumerable","configurable","filterTargetsData","numMassShootings","propertyString","valueString","formattedData","formatData","closeOpenSpaces","Space","parseFloat","injured","parseClosedOpenData","dataForUS","selectedIndex","currentTarget","targetString","onClick","data-index","yes","no","chartClass","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch","error","message","module","exports"],"mappings":"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","file":"static/js/main.be4dc770.chunk.js","sourcesContent":["import React from 'react'\n\nconst Legend = ({ keys, colors }) => {\n    return (\n        <article className=\"legend\">\n            {\n                keys.map((key, i) => {\n                    // Capitalise first letter of key\n                    const capitalisedKey = `${key.charAt(0).toUpperCase()}${key.substring(1)}`\n                    return (\n                        <div key={i} className=\"key\" style={{ backgroundColor: colors[i] }}>\n                            <p>{capitalisedKey}</p>\n                        </div>\n                    )\n                })\n            }\n        </article>\n    )\n}\n\nexport default Legend","import { useEffect, useState } from 'react'\nimport ResizeObserver from 'resize-observer-polyfill'\n\nexport const useResizeObserver = ref => {\n    const [dimensions, setDimensions] = useState(null)\n    useEffect(() => {\n        const observerTarget = ref.current\n        const resizedObserver = new ResizeObserver(entries => {\n            entries.forEach(entry => setDimensions(entry.contentRect))\n        })\n        resizedObserver.observe(observerTarget)\n        return () => {\n            resizedObserver.unobserve(observerTarget)\n        }\n    }, [ref])\n    return dimensions\n}","import React, { useRef, useEffect } from 'react';\nimport { select, arc, pie, scaleOrdinal } from 'd3';\nimport Legend from '../Legend/Legend'\n\nimport { useResizeObserver } from '../../hooks/useResizeObserver'\n\n// https://www.youtube.com/watch?v=HLpw0JFY4-E&t=37s\n\nconst PieChart = ({ chartAlign, pieChartData, innerRadius, outerRadius }) => {\n\n    // Pointers for the svg and wrapping article element respectively\n    const pieChartRef = useRef()\n    const wrapperRef = useRef()\n\n    // Allows us to make the chart a bit more responsive\n    const dimensions = useResizeObserver(wrapperRef)\n\n    // Pie chart can only use numerical values, so we have to split up the data\n    // into two variables. One will hold all the titles or keys, and the other\n    // will hold all the values\n    const pieChartKeys = Object.keys(pieChartData)\n    const pieChartValues = Object.values(pieChartData)\n\n    // will be called initially and then every time the data array changes\n    useEffect(() => {\n        const svg = select(pieChartRef.current)\n\n        // If no dimensions or props are provided, the function will exit\n        if (!dimensions || !pieChartKeys.length || !pieChartValues.length) return\n        if (innerRadius === undefined || outerRadius === undefined) return\n\n\n        \n        \n        // Helps us to create the individual arcs for each data point\n        const arcGenerator = arc()\n            .innerRadius(innerRadius)\n            .outerRadius(outerRadius)\n\n        const pieGenerator = pie()\n        // Holds the information needed for the pieGenerator to work its magic\n        const instructions = pieGenerator(pieChartValues)\n\n        const colorScale = scaleOrdinal()\n            .domain(pieChartValues)\n            // Change colors here\n            .range([\"#EC8C86\", \"#B53731\", \"#69201C\"]);\n        \n        // Sets the x align for the pie chart\n        const alignPie = chartAlign === \"alignRight\" ? dimensions.width - 150 : 0 + 150\n        \n        // Creating the pie chart\n        svg\n            .selectAll(\".slice\")\n            .data(instructions)\n            .join(\"path\")\n            // Gave each slice a class of value + the number of victims\n            // E.g. value157\n            // This will help us target specific slices\n            .attr(\"class\", instruction => `slice value${instruction.value}`)\n            // .attr(\"stroke\", \"black\")\n            .attr(\"fill\", instruction => colorScale(instruction.value))\n            .style(\n                \"transform\",\n                `translate(${alignPie}px, ${dimensions.height / 2}px)`\n            )\n            .attr(\"d\", instruction => arcGenerator(instruction))\n            .on(\"mouseenter\", (data) => {\n\n                // We need to grab the label that corresponds to the numerical value\n                // Just made some variables to make it easier to access the \n                // labels and values arrays\n                let labelIndex = -1\n\n                // Loop through values array until we find a matching value,\n                // then assign the index of that element to labelIndex\n                for (let i = 0; i < pieChartValues.length; i++) {\n                    if (pieChartValues[i] === data.data) {\n                        labelIndex = i\n                        break;\n                    }\n                }\n\n                if (labelIndex < 0) return\n\n                // Capitalises first letter of label and attaches it to the rest of the word\n                const upperCaseLetter = pieChartKeys[labelIndex].charAt(0).toUpperCase()\n                const restOfWord = pieChartKeys[labelIndex].substring(1)\n                \n                pieChartKeys[labelIndex] = `${upperCaseLetter}${restOfWord}`\n\n                // Creates tooltip\n                svg\n                    .selectAll(\".tooltip\")\n                    .data([data])\n                    .join(enter => enter.append(\"text\"))\n                    .attr(\"class\", \"tooltip\")\n                    .attr(\"x\", (dimensions.width / 2) - 40)\n                    .attr(\"y\", dimensions.height)\n                    .text(`${pieChartKeys[labelIndex]}: ${pieChartValues[labelIndex]}`)\n                \n                // Selects the slice we are currently hovering over and change the color\n                svg\n                    .select(`.value${data.value}`)\n                    .attr(\"fill\", \"#693E3C\")\n                \n            })\n            .on(\"mouseleave\", (data) => {\n                // Removes tooltip\n                svg.select(\".tooltip\").remove()\n                // Reverts colors back to the original ones (red, green, blue)\n                svg.selectAll(`.slice`).attr(\"fill\", data => colorScale(data.value))\n            })\n\n    }, [pieChartData, dimensions, innerRadius, outerRadius, chartAlign, pieChartKeys, pieChartValues])\n\n    return (\n    <article className=\"graph pieChart\">\n        <Legend keys={pieChartKeys} colors={[\"#EC8C86\", \"#B53731\", \"#69201C\"]} />\n        <div ref={wrapperRef}>\n            <svg ref={pieChartRef}></svg>\n        </div>\n    </article>\n    )\n}\n\nexport default PieChart","\n// Binding the data from DC's data to the main geoJson object imported into the App.js file\nexport const bindDCDataToGeoJson = (updatedData, victims, targets) => {\n    bindVictimsData(updatedData, victims)\n    bindTargetsData(updatedData, targets)\n\n    return updatedData\n}\n\nconst bindVictimsData = (updatedData, victims) => {\n    for (let i = 0; i < updatedData.length; i++) {\n        const state = updatedData[i].properties.NAME\n        if (victims[state] === undefined) {\n            updatedData[i].properties[\"shootings\"] = 0\n            updatedData[i].properties[\"fatalities\"] = 0\n            updatedData[i].properties[\"injuries\"] = 0\n            updatedData[i].properties[\"policemenKilled\"] = 0\n            updatedData[i].properties[\"totalVictims\"] = 0\n        } else {\n            updatedData[i].properties[\"shootings\"] = victims[state].shootings\n            updatedData[i].properties[\"fatalities\"] = victims[state].fatalities\n            updatedData[i].properties[\"injuries\"] = victims[state].injuries\n            updatedData[i].properties[\"policemenKilled\"] = victims[state].policemenKilled\n            updatedData[i].properties[\"totalVictims\"] = victims[state].totalVictims\n        }\n        \n    }\n\n    return updatedData\n}\n\nconst bindTargetsData = (updatedData, targets) => {\n    for (let i = 0; i < updatedData.length; i++) {\n        const state = updatedData[i].properties.NAME\n        if (targets[state] === undefined) {\n            updatedData[i].properties[\"targets\"] = 0\n        } else {\n            updatedData[i].properties[\"targets\"] = targets[state]\n        }\n    }\n\n    return updatedData\n}\n\nexport const filterVictimsData = (data) => {\n    const filteredData = {}\n\n    for (let i = 0; i < data.length; i++) {\n        const row = data[i]\n        const state = row.States\n        filteredData[state] = {\n            shootings: +row[\"Number of mass shootings\"],\n            fatalities: +row.Fatalities,\n            injuries: +row.Injured,\n            policemenKilled: +row[\"Policemen Killed\"],\n            totalVictims: +row[\"Total victims\"]\n        }\n    }\n\n    return filteredData\n}\n\nexport const filterTargetsData = (data) => {\n    // Filter the data so that each state has the data all targets\n    const stateTargets = {}\n    const filteredData = Object.keys(data[0]).filter(key => key !== \"Target\")\n    filteredData.forEach(key => {\n        Object.defineProperty(stateTargets, `${key}`, {\n            value : data.map(row => (\n                row[key] !== \"\"\n                ?\n                {\n                    target: row.Target,\n                    victims: +row[key]\n                }\n                :\n                {\n                    target: row.Target,\n                    victims: 0\n                }\n            )),\n            writable : true,\n            enumerable : true,\n            configurable : true\n        })}\n    )\n    \n    return stateTargets\n\n}\n\nexport const parseClosedOpenData = (data) => {\n    const parsedData = data.map(row => (\n        {\n            space: row.Space,\n            fatalities: parseFloat(row.Fatalities),\n            injured: parseFloat(row.Injured),\n            totalVictims: parseFloat(row[\"Total victims\"])\n\n        }\n    ))\n\n    return parsedData\n}","import { bindDCDataToGeoJson } from './filterDCData'\n\nexport const filterCasualtyData = (data) => {\n    // Extracting the number of victims associated with each cause\n    const causesFreq = {}\n    for (let i = 0; i < data.length; i++) {\n        const currentCause = data[i].Cause\n        // If we haven't come across the current cause yet, add it in\n        // Then make it equal to the 'Total victims' value for that row\n        if (causesFreq[currentCause] === undefined) {\n            causesFreq[currentCause] = +data[i][\"Total victims\"]\n        } else {\n            // Otherwise, increment the existing value by the current 'Total victims' value\n            causesFreq[currentCause] += +data[i][\"Total victims\"]\n        }\n    }\n\n    // Since I had filtered out all the unknown causes, we can find how many there\n    // by minussing the number of filtered data rows from the main file's rows\n    // Main file = 323 rows\n\n    causesFreq[\"unknown\"] = 323 - data.length\n\n    return causesFreq\n}\n\nexport const filterCulpritDemographicData = (data) => {\n    let yearlyDemographics = []\n    \n    // 2017 - 1966 is 51, and we can use this to loop over the data one time per year\n    for (let i = 0, currentYear = 17; i < 52; i++) {\n        let shootingsOnThisYear = []\n        // Sifting through 2000s data\n        if (currentYear < 65 && currentYear >= 0) {\n            shootingsOnThisYear = data.filter(shooting => {\n                const year = shooting.Date.split(\"/\")[2]\n                if (year === `${2000 + currentYear}` || +year === currentYear) {\n                    return true\n                }\n                return false\n            })\n        // Sifting through 1900s data\n        } else {\n            shootingsOnThisYear = data.filter(shooting => {\n                const year = shooting.Date.split(\"/\")[2]\n                if (year === `${1900 + currentYear}` || +year === currentYear) {\n                    return true\n                }\n                return false\n            })\n        }\n\n        // Adding all the yearly shootings into one place\n        // Made a function (down below) that counts the demographics\n        yearlyDemographics.push(countDemographicFrequency(shootingsOnThisYear))\n        // Updating year property within the object so we can use it for the\n        // x-axis of stacked bar graph\n        if (currentYear < 65 && currentYear >= 0) {\n            yearlyDemographics[yearlyDemographics.length - 1].year = 2000 + currentYear\n        } else {\n            yearlyDemographics[yearlyDemographics.length - 1].year = 1900 + currentYear\n        }\n        \n        // Move to the next year\n        currentYear -= 1\n\n        // If we are done with 2000s, start with the 1900s\n        if (currentYear < 0) {\n            currentYear = 99\n        }\n\n    }\n\n    return yearlyDemographics.reverse()\n\n}\n\n// Helper function for the function above\nconst countDemographicFrequency = (shootingsForYear, currentYear) => {\n\n    // Object that keeps track of demographic frequency for the current year\n    let demographics = {\n        year: 0,\n        kidsAndTeenagers: 0,\n        youngAdults: 0,\n        adults: 0,\n        middleAged: 0\n    }\n\n    // Loop over each row associated with the current year and map the ages\n    // to the object above\n    shootingsForYear.map(shooting => {\n        const age = +shooting.Age\n\n        if (age > 0 && age <= 19) {\n            demographics[\"kidsAndTeenagers\"] += 1\n        } else if (age >= 20 && age < 34) {\n            demographics[\"youngAdults\"] += 1\n        } else if (age >= 35 && age < 45) {\n            demographics[\"adults\"] += 1\n        } else {\n            demographics[\"middleAged\"] += 1\n        }\n        return shooting\n        \n    })\n\n    // Demographic data is ready to be pushed to the array\n    return demographics\n}\n\n// Grabbing the data for the targets of shootings\nexport const filterShootingTargetData = (data) => {\n    const shootingTargets = {}\n    // Remove unknown target values by only keeping strings with at least one character\n    const filteredData = data.filter(row => row.Target.length)\n\n    for (let i = 0; i < filteredData.length; i++) {\n        // Check if current row's target is random\n        if (filteredData[i].Target.toLowerCase() === \"random\") {\n            // If so, increment the 'random' key value in shootingTargets\n            if (shootingTargets[\"random\"] === undefined) {\n                shootingTargets[\"random\"] = 1\n            } else {\n                shootingTargets[\"random\"] += 1\n            }\n        } else {\n            // Otherwise, increment the 'targeted' value\n            if (shootingTargets[\"targeted\"] === undefined) {\n                shootingTargets[\"targeted\"] = 1\n            } else {\n                shootingTargets[\"targeted\"] += 1\n            }\n        }\n    }\n\n    // Now that we have extracted all the random and targeted shootings\n    // we have to add the ones that were unknown\n    // To do this we grab all the rows that didn't have a target defined\n    const unknownData = data.filter(row => !row.Target.length)\n    \n    // And now we just add the number of unknown rows to the shootingTargets object\n    shootingTargets[\"unknown\"] = unknownData.length\n    \n    return shootingTargets\n}\n\n// Grabs the number of shooters with a military background\nexport const filterMilitaryCulprits = (data) => {\n    // The main csv file has 323 rows\n    // I have already filtered out the shooters with a military background and \n    // placed them in their own csv file (called militaryShooters.csv)\n    // So now I just have to minus the number of rows of the filtered file from\n    // the main file\n\n    const difference  = 323 - data.length\n\n    // Now I can create an object that will be used to populate the pie chart\n\n    const finalData = {\n        military: data.length,\n        other: difference\n    }\n\n    return finalData\n\n}\n\nexport const updateGeoJsonData = (geoJson, victims, targets) => {\n    // Make a copy of the geoJson data\n    let updatedData = [...geoJson.features]\n\n    // Add shooting data to the respective U.S. state properties\n    // This binds DC's data\n    bindDCDataToGeoJson(updatedData, victims, targets)\n\n    return updatedData\n}\n\nexport const filterStackedBarGraph = (data, property, startOfRange, endOfRange) => {\n    \n    const filteredData = data.filter(object =>  object[property] >= startOfRange &&\n                                                object[property] <= endOfRange)\n\n    return filteredData\n}\n\n\nexport const filterMentalHealthData = (data) => {\n    let yearlyMentalHealth = []\n    \n    // 2017 - 1966 is 51, and we can use this to loop over the data one time per year\n    for (let i = 0, currentYear = 17; i < 52; i++) {\n        let currentYearData = []\n        // Sifting through 2000s data\n        if (currentYear < 65 && currentYear >= 0) {\n            currentYearData = data.filter(shooting => {\n                const year = shooting.Date.split(\"/\")[2]\n                if (year === `${2000 + currentYear}` || +year === currentYear) {\n                    return true\n                }\n                return false\n            })\n        // Sifting through 1900s data\n        } else {\n            currentYearData = data.filter(shooting => {\n                const year = shooting.Date.split(\"/\")[2]\n                if (year === `${1900 + currentYear}` || +year === currentYear) {\n                    return true\n                }\n                return false\n            })\n        }\n\n        // Adding all the yearly shootings into one place\n        // Made a function (down below) that counts the demographics\n        yearlyMentalHealth.push(countMentalHealthFrequency(currentYearData))\n        // Updating year property within the object so we can use it for the\n        // x-axis of stacked bar graph\n        if (currentYear < 65 && currentYear >= 0) {\n            yearlyMentalHealth[yearlyMentalHealth.length - 1].year = 2000 + currentYear\n        } else {\n            yearlyMentalHealth[yearlyMentalHealth.length - 1].year = 1900 + currentYear\n        }\n        \n        // Move to the next year\n        currentYear -= 1\n\n        // If we are done with 2000s, start with the 1900s\n        if (currentYear < 0) {\n            currentYear = 99\n        }\n\n    }\n\n    return yearlyMentalHealth.reverse()\n\n}\n\n// Helper function for the function above\nconst countMentalHealthFrequency = (mentalHealthData) => {\n\n    // Object that keeps track of demographic frequency for the current year\n    let mentalIllnesses = {\n        year: 0,\n        actsOfTerrorism: 0,\n        psychologicalFactors: 0,\n        anger: 0,\n        frustration: 0,\n        unknown: 0\n    }\n\n    // Loop over each row associated with the current year and map the ages\n    // to the object above\n    for (let i = 0; i < mentalHealthData.length; i++) {\n        const row = mentalHealthData[i]\n\n        switch(row.Cause) {\n            case \"terrorism\":\n                mentalIllnesses[\"actsOfTerrorism\"] += 1\n                break;\n            case \"psycho\":\n                mentalIllnesses[\"psychologicalFactors\"] += 1\n                break;\n            case \"anger\":\n                mentalIllnesses[\"anger\"] += 1\n                break;\n            case \"frustration\":\n                mentalIllnesses[\"frustration\"] += 1\n                break;\n            case \"unknown\":\n            case \"\":\n                mentalIllnesses[\"unknown\"] += 1\n                break;\n            default:\n                break;\n        }\n\n    }\n\n    console.log(mentalIllnesses)\n\n    // Mental health data is ready to be pushed to the array\n    return mentalIllnesses\n}","import React from 'react'\n\nconst DropShadow = ({ stdDeviation, slope }) => {\n    return (\n        <defs>\n            <filter id=\"dropshadow\" height=\"130%\">\n            <feGaussianBlur in=\"SourceAlpha\" stdDeviation={stdDeviation}/> \n            <feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>\n            <feComponentTransfer>\n                <feFuncA type=\"linear\" slope={slope}/>\n            </feComponentTransfer>\n            <feMerge> \n                <feMergeNode/>\n                <feMergeNode in=\"SourceGraphic\"/> \n            </feMerge>\n            </filter>\n        </defs>\n    )\n}\n\nexport default DropShadow","import React, { useRef, useEffect, useState } from 'react'\nimport { select, geoPath, geoMercator, min, max, scaleLinear } from 'd3'\nimport { useResizeObserver } from '../../hooks/useResizeObserver'\nimport { updateGeoJsonData } from '../../functions/filterAndrewData'\nimport DropShadow from './DropShadow'\n\n// Where I got the GeoMap from: https://exploratory.io/map\n\n\nconst GeoChart = ({ data, victimsPerState, targetsPerState, property, isTargetsOptionSelected, selectedTargetIndex }) => {\n    const geoChartRef = useRef()\n    const wrapperRef = useRef()\n    const dimensions = useResizeObserver(wrapperRef)\n    const [selectedCountry, setSelectedCountry] = useState(null)\n\n    useEffect(() => {\n        const svg = select(geoChartRef.current)\n\n        if (!dimensions || targetsPerState === undefined || victimsPerState === undefined) return\n\n        const updatedFeaturesData = updateGeoJsonData(data, victimsPerState, targetsPerState)\n\n        // use resixed dimensions\n        // but fallback on getBoundingClientRect if there are no dimensions yet\n        const { width, height } = dimensions || wrapperRef.current.getBoundingClientRect()\n\n        if (updatedFeaturesData === undefined) return\n\n\n        const setMax = () => {\n            \n            return max(updatedFeaturesData, feature => {\n                const targets = feature.properties.targets\n                return targets === 0 ? 0 : feature.properties.targets[selectedTargetIndex].victims\n            })\n            \n        }\n\n        const minProp = min(updatedFeaturesData, feature => feature.properties[property])\n        const maxProp = max(updatedFeaturesData, feature => feature.properties[property])\n\n        let maxPropTargets = setMax() \n        if (maxPropTargets === 0) {\n            maxPropTargets = 1\n        }\n\n\n        \n        const colorScale = scaleLinear()\n            .domain(isTargetsOptionSelected ? [0, maxPropTargets] : [minProp, maxProp])\n            // Change colors here\n            .range([\"#ffcbc7\", \"#E8483F\"])\n\n        // Projects coordinates on a 2D plane\n        const projection = geoMercator()\n            .fitSize([width, height], selectedCountry || data)\n            .precision(100)\n\n        // Takes geojson data,\n        // Transforms that into the d attribute of a path element\n        const pathGenerator = geoPath().projection(projection)\n\n        \n        const setTooltipText = feature => {\n            const targets = feature.properties.targets\n            const formattedProperty = property.replace(/([a-z0-9])([A-Z])/g, '$1 $2').toLowerCase()\n            let targetsText = \"\"\n            let number = 0\n            if (targets !== 0) {\n                targetsText = `${targets[selectedTargetIndex].target.replace(/([a-z0-9])([A-Z])/g, '$1 $2').toLowerCase()}`\n                number = targets[selectedTargetIndex].victims\n            } else {\n                targetsText = \"Unknown\"\n            }\n            return !isTargetsOptionSelected \n                ?\n                `${feature.properties.NAME}: ${feature.properties[property]} \n                ${formattedProperty}`\n                :\n                (   \n                    targetsText !== \"Unknown\" ?\n                    `${feature.properties.NAME}: ${number}`\n                    :\n                    targetsText\n                )\n        }\n\n        const setFillOfMap = feature => {\n            if (isTargetsOptionSelected) { \n                console.log(feature, property, selectedTargetIndex)\n                if (feature.properties.targets !== undefined) {\n                    const targetValue = feature.properties.targets\n                    return targetValue === 0 \n                        ?\n                        colorScale(targetValue)\n                        :\n                        colorScale(targetValue[selectedTargetIndex].victims)\n                    // colorScale(target)\n                } else {\n                    return \"lightgray\"\n                }\n            } else {\n\n               return feature.properties[property] !== undefined \n                    ? colorScale(feature.properties[property])\n                    // Change color for undefined values\n                    : \"lightgray\"\n            }\n                        \n        }\n        \n     // set position etc.\n     const displayTooltip = (feature) => {\n        const tooltip = document.getElementById(\"geoTooltip\");\n        document.addEventListener(\"mousemove\", (e) => {\n            const x = e.clientX\n            const y = e.clientY\n            tooltip.style.left = (x - 300) + \"px\"\n            tooltip.style.top = (y - 80) + \"px\"\n        })\n        const text = document.getElementById(\"stateInfo\")\n        text.textContent = setTooltipText(feature)\n    }\n\n        // Render each country\n        svg\n            .selectAll(\".country\")\n            .data(data.features)\n            .join(\"path\")\n            .attr(\"class\", \"country\")\n            .on(\"mouseenter\", feature => {\n\n                select(\"#geoTooltip\").style(\"display\", \"block\")\n                displayTooltip(feature)\n\n            })\n            .on(\"mouseleave\", feature => {\n                // Removes tooltip\n                select(\"#geoTooltip\").style(\"display\", \"none\")\n                // Reverts colors back to the original ones (red, green, blue)\n                svg.selectAll(`.slice`).attr(\"fill\", feature => colorScale(feature.value))\n            })\n            .on(\"click\", feature => {\n                \n                setSelectedCountry(selectedCountry === feature ? null : feature)\n            }\n            )\n            .transition()\n            .duration(1000)\n            .attr(\"fill\", feature => setFillOfMap(feature))\n            .attr(\"d\", feature => pathGenerator(feature))\n\n            \n\n    }, [data, dimensions, property, selectedCountry, victimsPerState, targetsPerState, isTargetsOptionSelected, selectedTargetIndex])\n\n\n    return (\n        <div ref={wrapperRef} className=\"graph geoChart\">\n            <p id=\"usaText\">U S A</p>\n            <svg ref={geoChartRef}>\n                <DropShadow stdDeviation={10} slope={0.5} />\n            </svg>\n            \n            <div className=\"geoChartInfoContainer\">\n            {\n                selectedCountry !== null &&\n                <div className=\"geoChartInfo\">\n                    <p className=\"infoTitle\">{`${selectedCountry.properties.NAME} Statistics:`}</p>\n                    <p>{`Shootings: ${selectedCountry.properties.shootings}`}</p>\n                    <p>{`Fatalities: ${selectedCountry.properties.fatalities}`}</p>\n                    <p>{`Injuries: ${selectedCountry.properties.injuries}`}</p>\n                    <p>{`Policemen Killed: ${selectedCountry.properties.policemenKilled}`}</p>\n                    <p>{`Total Victims: ${selectedCountry.properties.totalVictims}`}</p>\n                </div>    \n            }\n            </div>\n            <div id=\"geoTooltip\">\n                <p id=\"stateInfo\"></p>\n            </div>\n        </div>\n    )\n}\n\nexport default GeoChart","import React, { useRef, useEffect, useState } from 'react';\nimport { select, scaleBand, axisBottom, axisLeft, stack, max, scaleLinear } from 'd3';\nimport { filterStackedBarGraph } from '../../functions/filterAndrewData'\n\nimport { useResizeObserver } from '../../hooks/useResizeObserver'\n\n// Tutorial: https://www.youtube.com/watch?v=bXN9anQN_kQ&list=PLDZ4p-ENjbiPo4WH7KdHjh_EMI7Ic8b2B&index=16\n\nconst AnimatedStackedBarGraph = ({ stackedBarGraphData, keys, colors }) => {\n\n    const [startValue, setStartValue] = useState(\"1966\")\n    const [endValue, setEndValue] = useState(\"2017\")\n\n    const onStartValueChange = (e) => {\n        setStartValue(e.target.value)\n    }\n\n    const onEndValueChange = (e) => {\n        setEndValue(e.target.value)\n    }\n\n    // Pointers for the svg and wrapping article element respectively\n    const stackedGraphRef = useRef()\n    const wrapperRef = useRef()\n\n    // Allows us to make the chart a bit more responsive\n    const dimensions = useResizeObserver(wrapperRef)\n\n    // will be called initially and then every time the data array changes\n    useEffect(() => {\n        const svg = select(stackedGraphRef.current)\n        const { width, height } =  \n            dimensions || wrapperRef.current.getBoundingClientRect()\n\n        // If no dimensions or data is provided, the function will stop\n        if (!dimensions || !stackedBarGraphData.length) return\n\n        // Filtering data according to startValue and endValue\n        // If the user makes the starting value higher than the ending value,\n        // I have to swap them around so that the filter still works\n        const dataForGraph = startValue > endValue \n                            ? \n                            filterStackedBarGraph(stackedBarGraphData, \"year\", endValue, startValue)\n                            :\n                            filterStackedBarGraph(stackedBarGraphData, \"year\", startValue, endValue)\n\n\n        console.log(dataForGraph)\n\n        const stackGenerator = stack().keys(keys)\n        const layers = stackGenerator(dataForGraph)\n        const yAxisRange = [0, max(layers, layer => {\n            console.log(layer)\n            return max(layer, sequence => sequence[1])})]\n\n\n        // Scales\n        // This helps divide the width of the individual stacks evenly across the width of the svg\n        const xScale = scaleBand()\n            .domain(dataForGraph.map(data => data.year))\n            .range([0, width])\n            .padding(0.25)\n        \n        // This divides the y values even along the height of the svg\n        // Range goes from height to 0 because 0 is the top left of the svg, \n        // and height goes downwards\n        const yScale = scaleLinear()\n            .domain(yAxisRange)\n            .range([height, 0])\n        \n\n        // Setting up the axes\n        const xAxis = axisBottom(xScale)\n        svg\n            .select(\".x-axis\")\n            .attr(\"transform\", `translate(0, ${height})`)\n            .call(xAxis)\n            .selectAll(\"text\")\n            .attr(\"y\", 0)\n            .attr(\"x\", 9)\n            .attr(\"dy\", \".35em\")\n            .attr(\"transform\", \"rotate(90)\")\n            .style(\"text-anchor\", \"start\")\n\n        const yAxis = axisLeft(yScale)\n        svg\n            .select(\".y-axis\")\n            .call(yAxis)\n\n\n        // Rendering the graph\n        // Each layer holds the data points being graphed\n        // Each rect holds a specific data point within that layer\n        svg\n            .selectAll(\".layer\")\n            .data(layers)\n            .join(\"g\")\n            .attr(\"class\", \"layer\")\n            .attr(\"fill\", layer => colors[layer.key])\n            .selectAll(\"rect\")\n            .data(layer => layer)\n            .join(\"rect\")\n            .attr(\"class\", \"dataRect\")\n            .transition()\n            .duration(1500)\n            .attr(\"x\", sequence => xScale(sequence.data.year))\n            .attr(\"width\", xScale.bandwidth())\n            .attr(\"y\", sequence => yScale(sequence[1]))\n            .attr(\"height\", sequence => yScale(sequence[0]) - yScale(sequence[1]))\n\n\n    }, [stackedBarGraphData, dimensions, keys, colors, startValue, endValue])\n\n    return (\n    <article>\n        <article className=\"graph stackedGraph\">\n            <div ref={wrapperRef}>\n                <svg ref={stackedGraphRef}>\n                    <g className=\"x-axis\" />\n                    <g className=\"y-axis\" />\n                </svg>\n            </div>\n            \n        </article>\n        <article className=\"rangeSliders\">\n            <div className=\"sliderContainer\">\n                <label>Start Value</label>\n                <div>\n                    <input  className=\"slider\" \n                            type=\"range\"\n                            min={\"1966\"} \n                            max={\"2017\"}\n                            value={startValue}\n                            onChange={onStartValueChange}\n                    />\n                    <span className=\"sliderValue\">{startValue}</span>\n                </div>\n            </div>\n            <div className=\"sliderContainer\">\n                <label>End Value</label>\n                <div>\n                    <input  className=\"slider\" \n                            type=\"range\"\n                            min={\"1966\"} \n                            max={\"2017\"}\n                            value={endValue}\n                            onChange={onEndValueChange}\n                    />\n                    <span className=\"sliderValue\">{endValue}</span>\n                </div>\n            </div>\n        </article>\n    </article>\n    )\n}\n\nexport default AnimatedStackedBarGraph","import React from 'react'\n\nconst FilterButtons = ({ keysState, keysArray, setKeysArray, colors, onCheckboxChange } ) => {\n    return (\n        <div className=\"fields\">\n          {\n            keysArray.map(key => (\n              <div key={key} className=\"fieldContainer mentalHealthFieldContainer\" style={{ backgroundColor: colors[key] }}>\n                <div className=\"field\">\n                  <input\n                    id={key}\n                    type=\"checkbox\"\n                    checked={keysState.includes(key)}\n                    onChange={(e) => onCheckboxChange(e, key, keysState, setKeysArray)}\n                  />\n                  <label htmlFor={key}>\n                    {/* The key is in camel case, so this will split it into individual words */}\n                    {`${key.charAt(0).toUpperCase()}${key.substring(1).replace(/([a-z0-9])([A-Z])/g, '$1 $2')}`}\n                  </label>\n                </div>\n              </div>\n            ))\n          }\n        </div>\n    )\n}\n\nexport default FilterButtons","import React, { useRef, useEffect } from 'react';\nimport { select, scaleBand, axisBottom, axisLeft, stack, scaleLinear } from 'd3';\nimport Legend from '../Legend/Legend'\n\nimport { useResizeObserver } from '../../hooks/useResizeObserver'\n\n// Tutorial: https://www.youtube.com/watch?v=bXN9anQN_kQ&list=PLDZ4p-ENjbiPo4WH7KdHjh_EMI7Ic8b2B&index=16\n\nconst StackedBarGraph = ({ stackedBarGraphData, keys, colors }) => {\n\n    // Pointers for the svg and wrapping article element respectively\n    const stackedGraphRef = useRef()\n    const wrapperRef = useRef()\n\n    // Allows us to make the chart a bit more responsive\n    const dimensions = useResizeObserver(wrapperRef)\n\n    // will be called initially and then every time the data array changes\n    useEffect(() => {\n        const svg = select(stackedGraphRef.current)\n        const { width, height } =  \n            dimensions || wrapperRef.current.getBoundingClientRect()\n\n        // If no dimensions or data is provided, the function will stop\n        if (!dimensions || !stackedBarGraphData.length) return\n\n\n        const stackGenerator = stack().keys(keys)\n        const layers = stackGenerator(stackedBarGraphData)\n        const yAxisRange = [0, 100]\n\n        // Scales\n        // This helps divide the width of the individual stacks evenly across the width of the svg\n        const xScale = scaleBand()\n            .domain(stackedBarGraphData.map(data => data.space))\n            .range([0, width])\n            .padding(0.25)\n        \n        // This divides the y values even along the height of the svg\n        // Range goes from height to 0 because 0 is the top left of the svg, \n        // and height goes downwards\n        const yScale = scaleLinear()\n            .domain(yAxisRange)\n            .range([height, 0])\n        \n\n        // Setting up the axes\n        const xAxis = axisBottom(xScale)\n        svg\n            .select(\".x-axis\")\n            .attr(\"transform\", `translate(0, ${height})`)\n            .call(xAxis)\n\n        const yAxis = axisLeft(yScale)\n        svg\n            .select(\".y-axis\")\n            .call(yAxis)\n\n\n        // Rendering the graph\n        // Each layer holds the data points being graphed\n        // Each rect holds a specific data point within that layer\n        svg\n            .selectAll(\".layer\")\n            .data(layers)\n            .join(\"g\")\n            .attr(\"class\", \"layer\")\n            .attr(\"fill\", layer => colors[layer.key])\n            .selectAll(\"rect\")\n            .data(layer => layer)\n            .join(\"rect\")\n            .attr(\"class\", \"dataRect\")\n            .transition()\n            .attr(\"x\", sequence => xScale(sequence.data.space))\n            .attr(\"width\", xScale.bandwidth())\n            .attr(\"y\", sequence => yScale(sequence[1]))\n            .attr(\"height\", sequence => yScale(sequence[0]) - yScale(sequence[1]))\n\n\n    }, [stackedBarGraphData, dimensions, keys, colors])\n\n    return (\n    <article className=\"graph stackedGraph\">\n        <div ref={wrapperRef}>\n            <svg ref={stackedGraphRef}>\n                <g className=\"x-axis\" />\n                <g className=\"y-axis\" />\n            </svg>\n        </div>\n        <Legend keys={keys} colors={Object.values(colors)} />\n    </article>\n    )\n}\n\nexport default StackedBarGraph","import React, { useRef, useEffect } from 'react';\nimport {  select, line, axisBottom, axisRight, scaleLinear } from 'd3';\n\nimport Legend from '../Legend/Legend'\n\nimport { useResizeObserver } from '../../hooks/useResizeObserver'\n\nconst LineGraph = ({ lineGraphData, yAxisMax, reverseData, xAxisFontSize }) => {\n\n    const svgRef = useRef()\n    const wrapperRef = useRef()\n    const dimensions = useResizeObserver(wrapperRef)\n\n    // will be called initially and then every time the data array changes\n    useEffect(() => {\n    const svg = select(svgRef.current)\n\n    if (!dimensions || lineGraphData === undefined || xAxisFontSize === undefined) return\n    \n    let keys = Object.keys(lineGraphData)\n    let values = Object.values(lineGraphData)\n\n    if (reverseData !== undefined && reverseData === true) {\n        keys = keys.reverse()\n        values = values.reverse()\n    }\n\n    const xScale = scaleLinear()\n        .domain([0, keys.length - 1])\n        .range([0, dimensions.width])\n\n    const yScale = scaleLinear()\n        .domain([0, yAxisMax])\n        .range([dimensions.height, 0])\n\n    const xAxis = axisBottom(xScale)\n        .ticks(keys.length)\n        .tickFormat(index => keys[index])\n\n    const displayTooltip = (data) => {\n        const tooltip = document.getElementById(\"lineTooltip\");\n        tooltip.addEventListener(\"mousemove\", (e) => {\n            const x = e.clientX\n            const y = e.clientY\n            tooltip.style.left = (x - 300) + \"px\"\n            tooltip.style.top = (y - 80) + \"px\"\n        })\n        const text = document.getElementById(\"pointInfo\")\n        text.textContent = setTooltipText(data)\n    }\n\n    const setTooltipText = data => {\n        console.log(data)\n        return 'hello'\n        // const targets = feature.properties.targets\n        // const formattedProperty = property.replace(/([a-z0-9])([A-Z])/g, '$1 $2').toLowerCase()\n        // let targetsText = \"\"\n        // let number = 0\n        // if (targets !== 0) {\n        //     targetsText = `${targets[selectedTargetIndex].target.replace(/([a-z0-9])([A-Z])/g, '$1 $2').toLowerCase()}`\n        //     number = targets[selectedTargetIndex].victims\n        // } else {\n        //     targetsText = \"Unknown\"\n        // }\n        // return !isTargetsOptionSelected \n        //     ?\n        //     `${feature.properties.NAME}: ${feature.properties[property]} \n        //     ${formattedProperty}`\n        //     :\n        //     (   \n        //         targetsText !== \"Unknown\" ?\n        //         `${feature.properties.NAME}: ${number}`\n        //         :\n        //         targetsText\n        //     )\n    }\n    \n    svg\n        .select(\".x-axis\")\n        .style(\"transform\", `translateY(${dimensions.height}px)`)\n        .call(xAxis)\n        .selectAll(\"text\")\n        .attr(\"y\", 0)\n        .attr(\"x\", 9)\n        .attr(\"dy\", \".35em\")\n        .attr(\"transform\", \"rotate(90)\")\n        .style(\"text-anchor\", \"start\")\n        .style(\"font-size\", xAxisFontSize !== undefined ? `${xAxisFontSize}px` : \"\")\n\n\n    const yAxis = axisRight(yScale)\n    svg\n        .select(\".y-axis\")\n        .style(\"transform\", `translateX(${dimensions.width}px)`)\n        .call(yAxis)\n\n    // generates the \"d\" attribute of a path element\n    const myLine = line()\n    .x((value, index) => xScale(index))\n    .y(yScale)\n\n    // renders the path element and attaches the \"d\" \n    // attribute from line generator above\n    svg\n        .selectAll(\".line\")\n        .data([values])\n        .join(\"path\")\n        .attr(\"class\", \"line\")\n        .attr(\"d\", myLine)\n        .on('mouseenter', value => {\n            select(\"#lineTooltip\").style(\"display\", \"block\")\n            displayTooltip(value)\n        })\n        .on('mouseleave', value => select(\"#lineTooltip\").style(\"display\", \"none\"))\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#DA0000\")\n\n    }, [lineGraphData, reverseData, yAxisMax, xAxisFontSize, dimensions])\n\n    return (\n    <article className=\"graph lineGraph\">\n        <h3 id=\"part4-1\">Number of mass shootings recorded per year</h3>\n        <div ref={wrapperRef}>\n            <svg ref={svgRef}>\n                <g className=\"x-axis\" />\n                <g className=\"y-axis\" />\n            </svg>\n        </div>\n        <Legend keys={[\"frequency\"]} colors={[\"#DA0000\"]} />\n        <div id=\"lineTooltip\" className=\"tooltip\">\n            <p id=\"pointInfo\"></p>\n        </div>\n    </article>\n    )\n}\n\nexport default LineGraph","import React from 'react'\n\nconst Sidebar = () => {\n    return (\n        <aside>\n          <div class=\"aside-container\">\n            <h4>Jump To...</h4>\n            <ol>\n                <li><a href=\"#part1\">Mass Shootings in the U.S.</a></li>\n                <li><a href=\"#part2\">Where do shootings occur most often?</a></li>\n                <ol className=\"subheadings\">\n                    <li>\n                        <a href=\"#part2-1\">Percentage of fatalities and injuries as a result of mass shootings in open or closed spaces</a>\n                    </li>\n                </ol>\n                <li><a href=\"#part3\">Who is being targeted?</a></li>\n                <ol className=\"subheadings\">\n                    <li>\n                        <a href=\"#part3-1\">Shootings involving a specific vs random target</a>\n                    </li>\n                </ol>\n                <li><a href=\"#part4\">Frequency of Shootings</a></li>\n                <ol className=\"subheadings\">\n                    <li>\n                        <a href=\"#part4-1\">Number of mass shootings recorded per year</a>\n                    </li>\n                </ol>\n                <li><a href=\"#part5\">Why do they do it?</a></li>\n                <ol className=\"subheadings\">\n                    <li>\n                        <a href=\"#part5-1\">Did the shooter suffer from a mental health issue?</a>\n                    </li>\n                </ol>\n                <li><a href=\"#part6\">Shootings in relation to mental health and age groups</a></li>\n                <li><a href=\"#part7\">Who are they?</a></li>\n                <ol className=\"subheadings\">\n                    <li>\n                        <a href=\"#part7-1\">Percentage of shooters with a background in the military or police force</a>\n                    </li>\n                </ol>\n                <li><a href=\"#part8\">Conclusion</a></li>\n            </ol>\n          </div>\n      </aside>\n    )\n}\n\nexport default Sidebar","import React, { useState, useEffect } from 'react';\n\nimport PieChart from './components/PieChart/PieChart'\nimport GeoChart from './components/GeoChart/GeoChart'\nimport dataForUS from './json/states.geo.json'\nimport AnimatedStackedBarGraph from './components/StackedBarGraph/AnimatedStackedBarGraph'\nimport FilterButtons from './components/StackedBarGraph/FilterButtons'\nimport StackedBarGraph from './components/StackedBarGraph/StackedBarGraph'\nimport LineGraph from './components/LineGraph/LineGraph'\nimport Sidebar from './components/Sidebar/Sidebar'\n\n// Converts csv files to an array so we can manipulate them\nimport { csv } from 'd3'\n// Andrew's Data\nimport allMassShootings from './data/Andrew/mass_shootings.csv'\nimport culpritDemographics from './data/Andrew/culpritDemographics.csv'\nimport shooterOccupations from './data/Andrew/militaryShooters.csv'\n\n// DC's Data\nimport victimsOfShootings from './data/DC/victimsPerState.csv'\nimport targetsFrequency from './data/DC/targetsFrequency.csv'\nimport closeOpenSpaces from './data/DC/closeOpenSpaces.csv'\n\n// Tom's Data\nimport numMassShootings from './data/Tom/numMassShootings.csv'\n\n// All filter and update functions (from the andrewsFunctions.js file)\n// If you make a separate, make a new import, don't append it to this one as\n// it won't find it in the andrewsFunctions.js file\nimport {  filterCulpritDemographicData, \n          filterShootingTargetData, \n          filterMilitaryCulprits,\n          filterMentalHealthData } from './functions/filterAndrewData'\n\nimport { filterVictimsData, filterTargetsData, parseClosedOpenData } from './functions/filterDCData'\n\nimport { formatData } from './functions/formatData'\n\nimport './App.css';\n\nfunction App() {\n  \n  // GeoChart Data\n  // const [shootingsPerState, setShootingsPerState] = useState({})\n  const [victimsPerState, setVictimsPerState] = useState({})\n  const [targetsPerState, setTargetsPerState] = useState({})\n  const [property, setProperty] = useState(\"shootings\")\n  const [isTargetsOptionSelected, setIsTargetsOptionSelected] = useState(false)\n  // This holds the index of which target has been selected\n  // This index will help us retrieve the number of victims associated with that target\n  // for a specific state\n  const [selectedTargetIndex, setSelectedTargetIndex] = useState(0)\n\n\n  // For first dropdown\n  const onStatChange = (e) => {\n    if (e.target.value !== \"target\") {\n      setProperty(e.target.value)\n      setIsTargetsOptionSelected(false)\n    } else {\n      setProperty(e.target.value)\n      setIsTargetsOptionSelected(true)\n    }\n  }\n\n  // For the second dropdown that appears when 'Targets' is selected\n  const onTargetChange = (e) => {\n    const index = document.getElementById(\"targetSelect\").selectedIndex\n    setProperty(e.target.value)\n    setSelectedTargetIndex(index)\n  }\n\n\n  // PieChart Data\n  const [pieChartData, setPieChartData] = useState({})\n  const [occupationsData, setOccupationsData] = useState({})\n\n\n  // Line graph data\n  const [numShootingsData, setNumShootingsData] = useState({})\n\n\n\n  // First Animated Stacked Bar Graph data\n  const [ageGroupData, setAgeGroupData] = useState({})\n  const ageGroupKeys = ['kidsAndTeenagers', 'youngAdults', 'adults', 'middleAged']\n  const [ageGroups, setAgeGroups] = useState(ageGroupKeys)\n  const ageGroupColors = {\n    kidsAndTeenagers:\"#BB86FC\", \n    youngAdults:\"#FF867D\", \n    adults: \"#7CFDA3\", \n    middleAged: \"#FFF57D\"\n  }\n\n  // Second Animated Stacked Bar Graph data\n  const [mentalHealthFrequencies, setMentalHealthFrequencies] = useState([])\n  const mentalHealthKeys = [\"actsOfTerrorism\", \"psychologicalFactors\", \"anger\", \"frustration\", \"unknown\"]\n  const [mentalIllnesses, setMentalIllnesses] = useState(mentalHealthKeys)\n  const mentalHealthColors = {\n    actsOfTerrorism:\"#BB86FC\", \n    psychologicalFactors:\"#FF867D\", \n    anger: \"#7CFDA3\", \n    frustration: \"#E14C92\",\n    unknown: \"#FFAA57\"\n  }\n\n  // Function for filtering data for both stacked bar graphs\n  const onCheckboxChange = (e, key, keysArray, setKeysArray) => {\n    if (!e.target.checked) {\n        const filteredKeysArray = keysArray.filter(currentKey => currentKey !== key)\n        setKeysArray(filteredKeysArray)\n    } else {\n        setKeysArray(Array.from(new Set([...keysArray, key])))\n    }\n  }\n\n  const [stackedDataToView, setStackedDataToView] = useState(\"\")\n\n  const onDataChange = (e) => {\n    console.log(e.target.value)\n    setStackedDataToView(e.target.value)\n  }\n\n\n\n  // Stacked Bar Graph Data\n  const [spaceData, setSpaceData] = useState([])\n  const spaceKeys = [\"fatalities\", \"injured\"]\n  const spaceColors = {\n    fatalities:\"#803A29\", \n    injured:\"#FFB19E\"\n  }\n\n\n  useEffect(() => {\n\n    // Filtering the data for stacked bar chart about shootings per ages each year\n    csv(culpritDemographics).then(data => {\n      // Created a method (see functions folder) that extracts the data required\n      const dataReceived = filterCulpritDemographicData(data)\n      setAgeGroupData(dataReceived)\n    })\n\n    // Filtering data for pie chart about the targets for mass shootings\n    csv(allMassShootings).then(data => {\n      // Created a method (see functions folder) that extracts the data required\n      const dataForPieChart = filterShootingTargetData(data)\n      setPieChartData(dataForPieChart)\n\n      const dataForStackedGraph = filterMentalHealthData(data)\n      setMentalHealthFrequencies(dataForStackedGraph)\n\n    })\n\n    csv(shooterOccupations).then(data => {\n      // Created a method (see functions folder) that extracts the data required\n      const dataReceived = filterMilitaryCulprits(data)\n      setOccupationsData(dataReceived)\n    })\n\n    // Filtering data for geo chart\n    csv(victimsOfShootings).then(data => {\n      const dataReceived = filterVictimsData(data)\n      setVictimsPerState(dataReceived)\n    })\n\n    csv(targetsFrequency).then(data => {\n      const dataReceived = filterTargetsData(data)\n\n      setTargetsPerState(dataReceived)\n    })\n\n    // Filtering data for line graph about number of shootings\n    csv(numMassShootings).then(data => {\n      const dataReceived = formatData(data, \"Date\", \"NumShootings\")\n      setNumShootingsData(dataReceived)\n    })\n\n\n    // Filtering data for stacked bar graph about closed and open spaces\n    csv(closeOpenSpaces).then(data => {\n      const dataReceived = parseClosedOpenData(data)\n      setSpaceData(dataReceived)\n    })\n\n\n  }, [])\n\n  return (\n    <section className=\"graphs\">\n      <article id=\"part1\" className=\"geoChartContainer\">\n        <GeoChart data={dataForUS}\n                  victimsPerState={victimsPerState}\n                  targetsPerState={targetsPerState}\n                  property={property}\n                  isTargetsOptionSelected={isTargetsOptionSelected}\n                  selectedTargetIndex={selectedTargetIndex}\n        />\n        <article className=\"dropdownContainer\">\n          <span className={isTargetsOptionSelected ? \"show\" : \"hide\"}>had</span>\n          {\n            isTargetsOptionSelected &&\n            <select id=\"targetSelect\" className=\"dropdown\" onChange={onTargetChange}>\n                  {\n                      // We need to create a dropdown with all the targets.\n                      // Every state has the targets defined, so we can just choose a state\n                      // and grab all the targets from there\n                      targetsPerState[\"Alabama\"].map((currentTarget, index) => {\n                          let targetString = currentTarget.target.replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n                          targetString = `${targetString.charAt(0).toUpperCase()}${targetString.substring(1)}`\n\n                          return <option onClick={console.log(index)} \n                                          key={index} \n                                          value={currentTarget.target} \n                                          data-index={index}\n                                  >\n                                  {targetString}\n                                  </option>\n                      })\n                  }\n            </select>\n          }\n          <span className={isTargetsOptionSelected ? \"show\" : \"hide\"}>as a</span>\n          <select className=\"dropdown\" onChange={onStatChange} >\n            <option value=\"shootings\">Shootings</option>\n            <option value=\"target\">Target</option>\n            <option value=\"fatalities\">Fatalities</option>\n            <option value=\"injuries\">Injuries</option>\n            <option value=\"policemenKilled\">Policemen Killed</option>\n            <option value=\"totalVictims\">Total Victims</option>\n          </select>\n          \n        </article>\n        <br/>\n        <br/>\n        <h2>Mass Shootings in the U.S. <br /><span id=\"subheading\">as shown per state</span></h2> \n        <h3>Hover over or click a state for more info</h3>\n        <p className=\"hypothesis\">Does the public accessibility of firearms and the complexity of mental health in the \n          United States of America increase the likelihood of gun violence and mass shootings?</p>\n\n      </article>\n\n      <Sidebar />\n\n      <p className=\"bodyText\">Based on a dataset of mass shootings in the United States of America (USA), we look \n        into a wide range of mass shootings that occurred from the 1st of July in 1966 to the \n        5th of November 2017, covering 323 shootings which resulted in a total of 1433 deaths \n        and 1995 injuries.</p>\n\n      <h2 id=\"part2\" className=\"bodyHeading\">Where do shootings occur most often?</h2>\n      \n      <p className=\"bodyText\">The USA is a large country, consisting of 50 states. But does the location of the \n        shooting make any difference?\n\n          <br />\n          <br />\n\n        As seen in the map above, California has the most significant number of mass shootings \n        compared to the other states, as well as the highest number of fatalities due to mass \n        shootings.\n\n          <br />\n          <br />\n\n        While Nevada has had the highest number of injuries as a result of mass shootings during \n        this time period, it was the result of a single mass shooting, infamously known as the \n        “2017 Las Vegas shooting”, where a man named Stephen Paddock opened fire on a crowd of \n        concert goers at the Route 91 Harvest music festival on the Las Vegas strip in Nevada.\n\n          <br />\n          <br />\n\n        Interestingly enough, there were three states with no recordings of mass shootings \n        throughout the past five decades, namely New Hampshire, North Dakota, and Rhode Island. \n        Perhaps either they were not captured in the data set, or there truly were no mass shootings, \n        making these three states arguably the safest regarding mass shootings.</p>\n      \n      \n      <br />\n      <br />\n      <h3 id=\"part2-1\" className=\"bodyHeading\">Percentage of fatalities and injuries as a result of mass shootings in open or \n        closed spaces</h3>\n      <StackedBarGraph  stackedBarGraphData={spaceData} \n                        keys={spaceKeys}\n                        colors={spaceColors}\n      />\n      <p className=\"bodyText\">\n        When comparing the locations where mass shootings took place, significantly more mass \n        shootings occurred in a closed space, over twice as many mass shootings than in open \n        spaces. Even when comparing the percentage of injuries to deaths per closed or open \n        space, there is a similarly significant increase in the percentage of overall fatalities\n        from mass shootings in a closed space versus open space, as seen above.\n      </p>\n\n      <br />\n      <br />\n\n      <h2 id=\"part3\" className=\"bodyHeading\">Who is being targeted?</h2>\n      <p className=\"bodyText\">According to the data, nearly half of all recorded mass shootings in America from 1966 \n        to 2017 either did not involve a specific target, or the shooters’ motives for targeting \n        these individuals is unclear.\n\n        As seen in the map above, there are a significant number of mass shootings related to \n        family members, students, teachers, co-workers, and ex-partners, showing that in some \n        cases, when a shooter has a specific target, it tends to be someone they were close to.\n      </p>\n\n      <article className=\"pieChartLayout\">\n        <div className=\"pieChartDesc\">\n          <h3 id=\"part3-1\">Shootings involving a specific vs random target</h3>\n          <p>Looking at this from a different perspective, we compared the number of mass \n            shootings where shooters open fire randomly at a crowd, versus having a specific \n            target in mind when conducting the shooting.\n\n            <br />\n            <br />\n\n            The pie chart shows a noteworthy increase in specific targets compared to random \n            shootings. As we continue to look deeper into a shooter’s motives, we can see that \n            there are many shooters who wish to vent their frustrations on specific targets, \n            likely to be the people who upset the shooter in the first place.</p>\n        </div>\n        <PieChart chartAlign={\"alignRight\"} pieChartData={pieChartData} innerRadius={0} outerRadius={150} />\n      </article>\n\n      <br/>\n      <br/>\n\n      <h2 id=\"part4\" className=\"bodyHeading\">Frequency of shootings</h2>\n      <p className=\"bodyText\">\n      The date of mass shootings has also been considered, in order to learn what role it may have on mass shootings, if any.\n      </p>\n      <LineGraph  lineGraphData={numShootingsData} \n                  yAxisMax={30} \n                  reverseData={false}\n                  xAxisFontSize={10}\n      />\n      <p className=\"bodyText\">Immediately upon observation, we may easily interpret the 2015-2016 period to be the \n        most deadly years of mass shootings in the US. We can also determine that this is a \n        prevalent spike in mass shootings during this period, as the number of these tragedies \n        drops back to the same levels in 2007-2013 for the 2017 year. \n        <br/>\n        <br/>\n        Thus, can we conclude that the prevalence of mass shootings increased over time? While \n        we may be inclined to follow the data and provide a solid ‘yes’, we should also consider \n        that since 1967, the way that mass shootings and the factors around society have changed \n        and evolved greatly. According to this data, it is clear that mass shootings have increased \n        over time, almost exponentially; but we may also need to consider that there are several \n        factors that may have affected this data.\n\n      </p>\n\n      <br />\n      <br />\n\n      <h2 id=\"part5\" className=\"bodyHeading\">Why do they do it?</h2>\n      <p className=\"bodyText\">The data has provided various information about the shooter, such as their \n        age, gender, possible mental health, their intended target, their motives, \n        and more.</p>\n\n      <article id=\"part5-1\" className=\"pieChartLayout\">\n        <div className=\"pieChartDesc\">\n          <h3>Did the shooter suffer from a mental health issue?</h3>\n          <p>We can see that 33% of assailants were diagnosed as mentally ill while 29% did \n            not have any major mental health issues. It is important to note that 38% of \n            recorded shooters mental health status was not identified. This could have been \n            due to the information not being revealed, or the information being unavailable, \n            such as when the shooter commits suicide.</p>\n        </div>\n        <PieChart chartAlign={\"alignRight\"} pieChartData={{ yes: 106, no: 93, unknown: 124 }} innerRadius={0} outerRadius={150} />\n      </article>\n\n      <br />\n      <br />\n\n      <article className=\"stackedGraphSection\">\n        <div className=\"stackedGraphHeading\">\n          <h2 id=\"part6\">Number of U.S. Mass Shootings per year in relation to:</h2>\n          <select className=\"dropdown\" onChange={onDataChange}>\n            <option value=\"mentalHealth\">motives of individuals suffering from mental health conditions</option>\n            <option value=\"ageGroups\">age groups</option>\n          </select>\n        </div>\n        {\n          stackedDataToView === \"ageGroups\"\n          ?\n          <div>\n            <FilterButtons keysState={ageGroups} \n                            keysArray={ageGroupKeys} \n                            colors={ageGroupColors} \n                            setKeysArray={setAgeGroups} \n                            onCheckboxChange={onCheckboxChange} \n            />\n            <AnimatedStackedBarGraph  stackedBarGraphData={ageGroupData} \n                                    keys={ageGroups}\n                                    colors={ageGroupColors}\n            />\n          </div>\n          :\n          <div>\n            <FilterButtons keysState={mentalIllnesses} \n                            keysArray={mentalHealthKeys} \n                            colors={mentalHealthColors} \n                            setKeysArray={setMentalIllnesses} \n                            onCheckboxChange={onCheckboxChange} \n            />\n            <AnimatedStackedBarGraph  stackedBarGraphData={mentalHealthFrequencies} \n                                      keys={mentalIllnesses}\n                                      colors={mentalHealthColors}\n            />\n          </div>\n        }\n      </article>\n\n      <p id=\"stackGraphContent\" className=\"bodyText\">\n        Among the known motives for mass shootings, a significant number of mass shootings \n        were classified as “acts of terrorism”. Upon further investigation into the summaries \n        of mass shootings categorised as acts of terrorism, we presume that “acts of terrorism” \n        is used as a general classification for mass shootings without a specific motive, as a \n        mass shooting is ultimately considered an act of terrorism, and is thus more than likely \n        to be associated with such a motive.\n\n        <br />\n        <br />\n\n        On the other hand, “psychological factors” takes up the majority of mass shootings when \n        excluding mass shootings with unknown motives. Together with the previous pie chart, this \n        illustrates how prevalent mass shootings involving assailants suffering from mental health \n        illness are.\n      </p>\n\n        <br />\n        <br />\n\n      <h2 id=\"part7\" className=\"bodyHeading\">Who are they?</h2>\n\n      <p className=\"bodyText\">\n        Another factor to consider is the shooter’s age. Among the list of mass shootings, \n        roughly 25% are committed by teenagers, ranging from 12 to 19 years old. Despite gun \n        laws in the USA permitting persons 18 years and above to purchase rifles or shotguns, \n        roughly 65% of teenage shooters are aged 17 and below.\n\n        <br />\n        <br />\n\n        In addition, much can also be said about the accessibility that a legal teenager in the \n        USA has to guns. In the current US climate, the major barrier that exists between gun \n        control and the 16 million new guns that enter the US market is the debate between the \n        constitutional right to bear arms and gun regulation.\n\n        <br />\n        <br />\n\n        Looking back at the graph, a total of roughly 60% of shooters are between 20 to 44 \n        years old. This age group easily takes up the majority of recorded mass shootings from \n        1966 to 2017. We surmise that this age group may possibly have key differentiating \n        factors for occurences of mass shootings. Perhaps many 20 to 44 year olds have just \n        started living on their own, as many tend to move out of their parents’ home at an \n        early age, and may not have the financial means to support themselves, resulting in \n        venting their frustrations in the form of a mass shooting.\n        </p>\n\n      <br />\n      <br />\n\n      <article className=\"pieChartLayout\">\n        <PieChart chartClass={\"alignPieRight\"} pieChartData={occupationsData} innerRadius={100} outerRadius={150} />\n        <div className=\"pieChartDesc\">\n          <h3 id=\"part7-1\">Percentage of shooters with a background in the military or police force</h3>\n          <p>With psychological factors playing such a large role, we looked into the occupations \n            of shooters, specifically the military and police, as they are most commonly \n            associated with mental and stress issues related to firearms due to post-traumatic \n            stress disorder (PTSD) being a common issue faced by uniformed officers, which may \n            play a role in inciting a current or former uniformed officer into instigating a mass \n            shooting.\n            <br />\n            <br />\n            From the data, we learn that individuals with a military or police background were \n            responsible for 7% of all mass shootings in the USA, based on the data set. \n            <br />\n            <br />\n            However, Barbara Vam Dahlen, the founder of non-profit “Give an Hour”, an organisation \n            that provides counselling and other support to veterans, states that PTSD “creates a \n            risk factor”, but doesn’t necessarily determine whether or not they will initiate a mass \n            shooting. 3 out of 10 of the deadliest mass shootings in the U.S. were performed by people \n            with a military background. As such, it is clear to see that links to the military or \n            police are not a common occurrence in relation to these mass shootings.</p>\n        </div>\n      </article>\n\n      <br/>\n      <br/>\n\n      <h2 id=\"part8\" className=\"bodyHeading\">Conclusion</h2>\n      <p className=\"bodyText\">\n          While the data may imply that the likelihood of gun violence and mass shootings in \n          the USA is influenced by the public accessibility of firearms and the complexity of \n          mental health, the opinions of various readers can greatly differ, even if shown the \n          same data. As such, instead of providing the reader with a definitive answer, below \n          are some of our own speculations regarding the data, for the reader’s consideration, \n          and to make their own judgements:\n\n          <br/>\n          <br/>\n\n          As seen with California and Nevada, a higher number of mass shootings does not \n          necessarily result in a higher rate of injury or fatalities. Additionally, the \n          severity of a mass shooting is heavily dependent on multiple factors.\n\n          <br/>\n          <br/>\n\n          As we observed earlier, the majority of targets tend to either be family members, \n          students, teachers, co-workers, and ex-partners. These are mostly people that one \n          might know well and be fairly close to, giving shooters the opportunity to meet \n          their targets within a closed space; homes, schools, offices, etc.\n\n          <br/>\n          <br/>\n\n          Furthermore, our data has shown that there is a higher percentage of fatalities in \n          closed spaces than in open space, which is likely due to the shooter being in closer \n          proximity to their targets, increasing their chance of fatally wounding the victims, \n          leading to a higher fatality rate.\n\n          <br/>\n          <br/>\n\n          As mentioned previously, it is clear that mass shootings have slowly increased over \n          time, even when excluding the years 2015 and 2016; but we may also need to consider \n          that there are several factors that may have affected this data, as the way that mass \n          shootings and the factors around society could have changed and evolved greatly over \n          the years. Such factors may include the availability and influence of popular media \n          that may have had a dramatic effect on how mass shootings were reported, or adversely \n          the amount of attention it places on both the shooter and victims. Additionally, the \n          evolution of stressing factors to public mental health have greatly evolved since 1967.\n\n          <br/>\n          <br/>\n\n          This is further supported by the fact that the majority of known motives for mass \n          shootings is registered as psychological factors in the shooter, suggesting that the \n          barrier to mental health care is a significant issue faced by many Americans. \n\n          <br/>\n          <br/>\n\n          From the data, we have seen a significant number of minors as the culprits of mass \n          shootings, which begs the question of how they came into possession of firearms that \n          they are not legally allowed to purchase or own. We speculate one possibility could \n          be that parents who own firearms may not have properly secured them, allowing their \n          children to easily acquire a weapon they are in illegal possession of.\n\n          <br/>\n          <br/>\n\n          On the other hand, shooters from older age groups could have numerous more reasons \n          than those mentioned previously. Other than psychological factors, the data shows \n          other possibilities include instigating a mass shooting out of anger, frustration, \n          revenge, racism, domestic disputes and more, leaning toward the idea that many mass \n          shootings come from dissatisfaction from the shooter in their daily lives.</p>\n\n          <br/>\n          <br/>\n\n        <footer>\n          <p>Andrew Aiello | Thomas Lim | Chan Deng Chiew | Nicholas Ho</p>\n        </footer>\n\n    </section>\n  )\n}\n\nexport default App;\n\n","export const formatData = (data, propertyString, valueString) => {\n    const formattedData = {}\n    \n    for (let i = 0; i < data.length; i++) {\n        const property = data[i][propertyString]\n        const value = data[i][valueString]\n        formattedData[property] = +value\n    }\n\n    return formattedData\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/mass_shootings.773507f0.csv\";","module.exports = __webpack_public_path__ + \"static/media/culpritDemographics.11227ee2.csv\";","module.exports = __webpack_public_path__ + \"static/media/militaryShooters.ef2a8fae.csv\";","module.exports = __webpack_public_path__ + \"static/media/victimsPerState.1b622d14.csv\";","module.exports = __webpack_public_path__ + \"static/media/targetsFrequency.005a85c2.csv\";","module.exports = __webpack_public_path__ + \"static/media/closeOpenSpaces.1488bc2d.csv\";","module.exports = __webpack_public_path__ + \"static/media/numMassShootings.ad365587.csv\";"],"sourceRoot":""}